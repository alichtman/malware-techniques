import inquirer
from colorama import Fore, Style
import sys
sys.path.insert(0, "..")
from utils.print import *


def prompt_user(message):
	questions = [inquirer.List('choice',
	                           message=Fore.RED + Style.BRIGHT + message + Fore.BLUE,
	                           choices=(' Yes', ' No')
	                           )
	             ]

	answers = inquirer.prompt(questions)
	if answers:
		return True
	else:
		return False


def main():
	"""
	This demonstrates a simple check to make sure this malware is not
	running on an autoanalysis system. There will most likely be an
	aspect of social engineering to this, as well. Maybe a pop-up saying
	your computer is insecure and needs a critical Flash update will appear.
	Both the "confirm" and "deny" buttons lead to the malware installation,
	but it guarantees that nothing will happen on a system without someone
	actually pushing that button.
	"""
	print_section_header("Human interaction test.", Fore.BLUE)
	if (prompt_user("Would you like to continue with this test?")):
		print_green("Not running in auto-analysis sandbox.")

	# NOTE: If the user is non-existent, no code past the conditional
	# above will ever execute. The prompt is a blocking call.


if __name__ == '__main__':
	main()
